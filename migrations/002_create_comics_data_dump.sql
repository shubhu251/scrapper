CREATE TABLE IF NOT EXISTS `comics_data_dump` (
    `id` BIGINT AUTO_INCREMENT PRIMARY KEY,
    `title` VARCHAR(255),
    `series_name` VARCHAR(255),
    `issue` INT,
    `language` VARCHAR(50),
    `binding` VARCHAR(100),
    `original_price` DECIMAL(10,2),
    `price` DECIMAL(10,2),
    `description` TEXT,
    `url` VARCHAR(2083) NOT NULL,
    `cover_image_url` TEXT,
    `source` VARCHAR(255) NOT NULL,
    `scraped_at` DATETIME NOT NULL,
    `uploaded_date` DATE,
    `publisher` VARCHAR(255),
    `pages` INT,
    `status` VARCHAR(50) NULL,
    `failed_at` DATETIME NULL,
    `processed_at` DATETIME NULL,
    `failure_reason` TEXT NULL,
    `writers` JSON,
    `artists` JSON,
    `colorists` JSON,
    `genre` JSON,
    `additional_info` JSON,
    `raw_json` JSON NOT NULL,
    `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX `idx_source` (`source`),
    INDEX `idx_publisher` (`publisher`),
    INDEX `idx_series_name` (`series_name`),
    UNIQUE KEY `uniq_url_title_price_source` (`url`, `title`, `price`, `source`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;


